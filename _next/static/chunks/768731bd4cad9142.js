(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,95865,e=>{"use strict";var t=e.i(75522),r=e.i(17138);let s="/SDP_team_52_demo_test",a=["/","/gallery","/generatefromtext","/generatefromimage","/viewer"];function i(){let e=(e=>{if(!e)return"/";if(e.startsWith(s)){let t=e.slice(s.length)||"/";return t.startsWith("/")?t:"/"+t}return e})((0,r.usePathname)()||"/"),i=(0,r.useRouter)(),n=(0,t.useRef)(!1),l=(0,t.useRef)(null),o=t=>{if(n.current)return;let r=a.indexOf(e);if(-1===r)return;let s=r;"down"===t&&r<a.length-1&&(s=r+1),"up"===t&&r>0&&(s=r-1),s!==r&&(e=>{if(n.current)return;n.current=!0;let t=document.getElementById("page");t&&(t.classList.remove("page-enter"),t.classList.add("page-exit")),window.setTimeout(()=>{i.push(e),window.setTimeout(()=>{n.current=!1},80)},320)})(a[s])};return(0,t.useEffect)(()=>{let e=e=>{30>Math.abs(e.deltaY)||(e.deltaY>0?o("down"):o("up"))},t=e=>{("PageDown"===e.key||"ArrowDown"===e.key)&&o("down"),("PageUp"===e.key||"ArrowUp"===e.key)&&o("up")},r=e=>{l.current=e.touches[0]?.clientY??null},s=e=>{if(null==l.current)return;let t=(e.changedTouches[0]?.clientY??l.current)-l.current;t<-50&&o("down"),t>50&&o("up"),l.current=null};return window.addEventListener("wheel",e,{passive:!0}),window.addEventListener("keydown",t),window.addEventListener("touchstart",r,{passive:!0}),window.addEventListener("touchend",s,{passive:!0}),()=>{window.removeEventListener("wheel",e),window.removeEventListener("keydown",t),window.removeEventListener("touchstart",r),window.removeEventListener("touchend",s)}},[e]),null}e.s(["default",()=>i])},90179,e=>{"use strict";var t=e.i(4828),r=e.i(87012),s=e.i(75522);function a({apiBase:e=t.default.env.NEXT_PUBLIC_API_BASE||"",accept:a="image/png,image/jpeg,image/webp",maxSizeMB:i=20}){let n=(0,s.useRef)(null),[l,o]=(0,s.useState)({status:"idle"}),d=(0,s.useCallback)(e=>{if(!e||!e[0])return;let t=e[0];if(!a.split(",").map(e=>e.trim()).some(e=>e.startsWith(".")?t.name.toLowerCase().endsWith(e.toLowerCase()):t.type===e))return void o({status:"error",message:"Unsupported file type. Please upload JPG / PNG / WEBP."});if(t.size>1024*i*1024)return void o({status:"error",message:`Max file size is ${i} MB.`});let r=URL.createObjectURL(t),s=new Image;s.onload=()=>{let e=s.width,a=s.height;e<256||a<256?o({status:"error",file:t,preview:r,message:`Image resolution is too low (${e} \xd7 ${a}). Minimum recommended is 256 \xd7 256.`}):o({status:"ready",file:t,preview:r})},s.onerror=()=>{o({status:"error",message:"Failed to read image resolution. Please try another image."})},s.src=r},[a,i]),u=e=>e?e.replace(/\/$/,""):"",c=async()=>{if(!("file"in l)||!l.file)return void o({status:"error",message:"Please upload an image before continuing."});if("uploading"===l.status)return;let t=l.file,r=l.preview;if(!e)return void o({status:"done",file:t,preview:r,result:{message:"Frontend upload flow works. Backend endpoint is not connected yet."}});o({status:"uploading",file:t,preview:r,progress:0});let s=new FormData;s.append("file",t);let a=`${u(e)}/upload`;await new Promise(i=>{let n=new XMLHttpRequest;n.open("POST",a,!0),n.upload.onprogress=e=>{if(e.lengthComputable){let t=Math.round(e.loaded/e.total*100);o(e=>"uploading"===e.status?{...e,progress:t}:e)}},n.onload=()=>{try{let s=n.responseText||"{}",a=JSON.parse(s);if(n.status>=200&&n.status<300){let s;a?.preview_url&&!String(a.preview_url).startsWith("http")&&(a.preview_url=(s=a.preview_url).startsWith("http")?s:`${u(e)}${s.startsWith("/")?"":"/"}${s}`),o({status:"done",file:t,preview:r,result:a})}else o({status:"error",file:t,preview:r,message:a?.error||`Upload failed (${n.status})`})}catch{o({status:"error",file:t,preview:r,message:`Unexpected server response (${n.status}).`})}i()},n.onerror=()=>{o({status:"error",file:t,preview:r,message:"Network error while uploading."}),i()},n.send(s)})},m="text-[color:var(--muted)]",p="uploading"===l.status;return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen px-6 py-16 md:py-20 gap-8",children:[(0,r.jsxs)("div",{className:"w-full max-w-5xl mb-2",children:[(0,r.jsx)("h1",{className:"text-[32px] font-semibold mb-2",children:"Generate from image"}),(0,r.jsx)("p",{className:m+" text-[14px] max-w-2xl",children:"Upload a single object image. We will run basic sanity checks (file type, size, resolution) and show a preview before sending it to the reconstruction backend."})]}),(0,r.jsx)("div",{className:"w-full max-w-5xl",children:(0,r.jsxs)("div",{className:"card p-6 md:p-7 border border-[color:var(--ring)] rounded-2xl",children:[(0,r.jsxs)("div",{onDragOver:e=>e.preventDefault(),onDrop:e=>{e.preventDefault(),d(e.dataTransfer.files)},className:`grid gap-3 place-items-center h-[300px] rounded-xl border-2 border-dashed border-[color:var(--ring)]
              bg-[rgba(255,255,255,.02)] hover:bg-[rgba(255,255,255,.04)] transition cursor-pointer`,onClick:()=>n.current?.click(),role:"button","aria-label":"Upload image",title:"Click or drop an image",children:["idle"===l.status&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:m,children:"Drag & drop an image here, or click to select"}),(0,r.jsxs)("div",{className:"text-[14px]",children:[a.replace(/image\//g,"")," • up to ",i,"MB"]})]}),("ready"===l.status||"uploading"===l.status||"done"===l.status||"error"===l.status)&&l.preview&&(0,r.jsx)("img",{src:l.preview,alt:"preview",className:"max-h-[240px] rounded-lg object-contain"})]}),(0,r.jsx)("input",{ref:n,type:"file",accept:a,hidden:!0,onChange:e=>d(e.target.files)}),(0,r.jsxs)("div",{className:"mt-6 flex gap-4 items-center",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{o({status:"idle"})},className:`
                px-6 py-2 rounded-full text-white text-sm
                border border-white/70 bg-transparent
                hover:bg-white/10 transition
              `,children:"Clear"}),(0,r.jsx)("button",{type:"button",onClick:c,disabled:p,className:`
                px-8 py-2 rounded-full text-white font-semibold text-sm
                border border-white/90 bg-transparent
                hover:bg-white/15 transition
                ${p?"opacity-60 cursor-not-allowed":""}
              `,children:"Upload"})]}),p&&(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("div",{className:"h-2 w-full bg-[rgba(255,255,255,.06)] rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:"h-full bg-[color:var(--brand)]",style:{width:`${l.progress}%`}})}),(0,r.jsxs)("div",{className:"mt-2 text-xs flex justify-between",children:[(0,r.jsxs)("span",{children:[l.progress,"%"]}),(0,r.jsx)("span",{className:m,children:"Estimated generation time: ~10–20s"})]})]}),"error"===l.status&&(0,r.jsx)("div",{className:"mt-3 text-sm text-red-300 font-medium",children:l.message}),"done"===l.status&&(0,r.jsxs)("div",{className:"mt-4 text-sm",children:[(0,r.jsx)("div",{className:"font-medium mb-1",children:"Server response:"}),(0,r.jsx)("pre",{className:"text-xs whitespace-pre-wrap break-words bg-black/30 rounded-lg p-3",children:JSON.stringify(l.result,null,2)})]}),(0,r.jsxs)("div",{className:"mt-6 text-[14px] text-[color:var(--muted)] leading-relaxed",children:[(0,r.jsx)("div",{className:"font-medium mb-1 text-white",children:"Tips for best results:"}),(0,r.jsx)("p",{children:"Use a clear, front-facing single-object image with minimal background clutter. Avoid low resolution or heavy motion blur."})]})]})})]})}e.s(["default",()=>a])}]);